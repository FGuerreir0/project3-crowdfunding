{"ast":null,"code":"import _objectSpread from\"/Users/fguerreir0/ironhack/projects/project3-crowdfunding/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/fguerreir0/ironhack/projects/project3-crowdfunding/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fguerreir0/ironhack/projects/project3-crowdfunding/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/fguerreir0/ironhack/projects/project3-crowdfunding/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/fguerreir0/ironhack/projects/project3-crowdfunding/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./styles.scss';import ProgressBar from'./../../components/ProgressBar';import{getProjectById,deleteProjectById}from'./../../services/project';import formatDate from'./../../helper/formatDate';import{Link}from'react-router-dom';import formatMoney from'./../../helper/formatMoney';export var SingleProjectView=/*#__PURE__*/function(_Component){_inherits(SingleProjectView,_Component);var _super=_createSuper(SingleProjectView);function SingleProjectView(props){var _this;_classCallCheck(this,SingleProjectView);_this=_super.call(this,props);_this.handleDelete=function(){_this.deleteProject();};_this.state={project:null,loaded:false,resources:false,volunteers:false};return _this;}_createClass(SingleProjectView,[{key:\"loadSingleProject\",value:function loadSingleProject(){var _this2=this;var id=this.props.match.params.project_id;getProjectById(id).then(function(project){//  console.log('project:', project);\n_this2.setState({loaded:true,project:_objectSpread({},project)});}).catch(function(error){console.log(error);});}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadSingleProject();}},{key:\"deleteProject\",value:function deleteProject(){var _this3=this;var id=this.props.match.params.project_id;// console.log('vamos eliminar', id);\ndeleteProjectById(id).then(function(project){_this3.props.history.push(\"/\");}).catch(function(error){// console.log('This is the error');\nconsole.log(error);});}},{key:\"render\",value:function render(){var project=this.state.project;var haveResources=false;var haveVolunteers=false;var iscreator=false;// console.log(this.props.user);\nif(project){if(project.needs.resources.length!==0){haveResources=true;}if(project.needs.volunteer.length!==0){haveVolunteers=true;}if(this.props.user._id===project.creator._id){iscreator=true;}}return/*#__PURE__*/React.createElement(\"div\",null,!this.state.loaded&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",null,\"Loading...\")),project&&/*#__PURE__*/React.createElement(\"div\",{className:\"mr-16 ml-16 mt-20\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"object-contain imageSingleProject\",src:project.coverPictureUrl,alt:project.title}),/*#__PURE__*/React.createElement(\"div\",{className:\"project_dateCreator\"},/*#__PURE__*/React.createElement(\"small\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Created by: \"),project.creator.username),/*#__PURE__*/React.createElement(\"small\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Date: \"),formatDate(project.updatedDate)))),/*#__PURE__*/React.createElement(\"div\",{className:\"project_information mt-16 mb-16\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-3xl\"},project.title),/*#__PURE__*/React.createElement(\"p\",{className:\"location\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-map-marker-alt\"},\" \"),' '+project.location),/*#__PURE__*/React.createElement(\"div\",{className:\"description\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-base lineH mb-5\"},project.shortDescription)),iscreator&&/*#__PURE__*/React.createElement(\"div\",{className:\"text-center mb-10\"},/*#__PURE__*/React.createElement(Link,{className:\"text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-4 border border-blue-700 rounded mr-4\",to:\"/project/\".concat(project._id,\"/edit\")},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleDelete,className:\"text-center bg-red-800 hover:bg-red-900 text-white font-bold  px-2 border border-red-900 rounded\"},\"Delete\"))),project.needs.money.total&&/*#__PURE__*/React.createElement(\"div\",{className:\"border-2 mb-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center mt-10 mb-10\"},/*#__PURE__*/React.createElement(\"small\",null,\"Goal: \",formatMoney(project.needs.money.total),\"\\u20AC || Achieved:\",' ',formatMoney(project.needs.money.backed),\"\\u20AC\"),/*#__PURE__*/React.createElement(ProgressBar,{project:project}),/*#__PURE__*/React.createElement(Link,{className:\"text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded\",to:\"/project/\".concat(project._id,\"/contribute\")},\"Support this cause\"))),/*#__PURE__*/React.createElement(\"div\",{className:\" pt-6 pr-6 pl-6 mr-10 ml-10 flex flex-row justify-between\"},haveResources&&/*#__PURE__*/ /* Something will show */React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Resources needed:\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table-auto mt-6 mb-10\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{className:\"px-4 py-2\"},\"Resource\"),/*#__PURE__*/React.createElement(\"th\",{className:\"px-4 py-2\"},\"Quantity\"))),/*#__PURE__*/React.createElement(\"tbody\",null,project.needs.resources.map(function(resource){return/*#__PURE__*/React.createElement(\"tr\",{key:resource._id},/*#__PURE__*/React.createElement(\"td\",{className:\"border-2 px-4 py-2 text-center\"},resource.name),/*#__PURE__*/React.createElement(\"td\",{className:\"border-2 px-4 py-2 text-center\"},resource.quantity,\" und.\"));})))),haveVolunteers&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Volunteers:\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table-auto mt-6 mb-10\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{className:\"px-4 py-2\"},\"Type\"),/*#__PURE__*/React.createElement(\"th\",{className:\"px-4 py-2\"},\"Quantity\"))),/*#__PURE__*/React.createElement(\"tbody\",null,project.needs.volunteer.map(function(volunteer){return/*#__PURE__*/React.createElement(\"tr\",{key:volunteer._id},/*#__PURE__*/React.createElement(\"td\",{className:\"border-2 px-4 py-2 text-center\"},volunteer.name),/*#__PURE__*/React.createElement(\"td\",{className:\"border-2 px-4 py-2 text-center\"},volunteer.quantity));}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-8\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mb-4 mt-6\"},\"If you want to contribute with any resources, needs: \"),/*#__PURE__*/React.createElement(Link,{className:\"text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded\",to:\"/user/\".concat(project.creator._id)},\"Contact me\"))));}}]);return SingleProjectView;}(Component);export default SingleProjectView;","map":{"version":3,"sources":["/Users/fguerreir0/ironhack/projects/project3-crowdfunding/client/src/views/SingleProject/index.jsx"],"names":["React","Component","ProgressBar","getProjectById","deleteProjectById","formatDate","Link","formatMoney","SingleProjectView","props","handleDelete","deleteProject","state","project","loaded","resources","volunteers","id","match","params","project_id","then","setState","catch","error","console","log","loadSingleProject","history","push","haveResources","haveVolunteers","iscreator","needs","length","volunteer","user","_id","creator","coverPictureUrl","title","username","updatedDate","location","shortDescription","money","total","backed","map","resource","name","quantity"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './styles.scss';\nimport ProgressBar from './../../components/ProgressBar';\nimport { getProjectById, deleteProjectById } from './../../services/project';\nimport formatDate from './../../helper/formatDate';\nimport { Link } from 'react-router-dom';\nimport formatMoney from './../../helper/formatMoney';\n\nexport class SingleProjectView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      project: null,\n      loaded: false,\n      resources: false,\n      volunteers: false\n    };\n  }\n\n  loadSingleProject() {\n    const id = this.props.match.params.project_id;\n    getProjectById(id)\n      .then((project) => {\n        //  console.log('project:', project);\n        this.setState({\n          loaded: true,\n          project: { ...project }\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  componentDidMount() {\n    this.loadSingleProject();\n  }\n\n  handleDelete = () => {\n    this.deleteProject();\n  };\n\n  deleteProject() {\n    const id = this.props.match.params.project_id;\n    // console.log('vamos eliminar', id);\n    deleteProjectById(id)\n      .then((project) => {\n        this.props.history.push(`/`);\n      })\n      .catch((error) => {\n        // console.log('This is the error');\n        console.log(error);\n      });\n  }\n\n  render() {\n    const project = this.state.project;\n    let haveResources = false;\n    let haveVolunteers = false;\n    let iscreator = false;\n    // console.log(this.props.user);\n\n    if (project) {\n      if (project.needs.resources.length !== 0) {\n        haveResources = true;\n      }\n      if (project.needs.volunteer.length !== 0) {\n        haveVolunteers = true;\n      }\n      if (this.props.user._id === project.creator._id) {\n        iscreator = true;\n      }\n    }\n    return (\n      <div>\n        {!this.state.loaded && (\n          <>\n            <span>Loading...</span>\n          </>\n        )}\n        {project && (\n          <div className='mr-16 ml-16 mt-20'>\n            <div>\n              <img\n                className='object-contain imageSingleProject'\n                src={project.coverPictureUrl}\n                alt={project.title}\n              />\n              <div className='project_dateCreator'>\n                <small>\n                  <strong>Created by: </strong>\n                  {project.creator.username}\n                </small>\n                <small>\n                  <strong>Date: </strong>\n                  {formatDate(project.updatedDate)}\n                </small>\n              </div>\n            </div>\n\n            <div className='project_information mt-16 mb-16'>\n              <h2 className='text-3xl'>{project.title}</h2>\n              <p className='location'>\n                <i className='fas fa-map-marker-alt'> </i>\n                {' ' + project.location}\n              </p>\n              <div className='description'>\n                <p className='text-base lineH mb-5'>{project.shortDescription}</p>\n              </div>\n\n              {iscreator && (\n                <div className='text-center mb-10'>\n                  <Link\n                    className='text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-4 border border-blue-700 rounded mr-4'\n                    to={`/project/${project._id}/edit`}\n                  >\n                    Edit\n                  </Link>\n\n                  <button\n                    onClick={this.handleDelete}\n                    className='text-center bg-red-800 hover:bg-red-900 text-white font-bold \n                   px-2 border border-red-900 rounded'\n                  >\n                    Delete\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {project.needs.money.total && (\n              <div className='border-2 mb-6'>\n                <div className='text-center mt-10 mb-10'>\n                  <small>\n                    Goal: {formatMoney(project.needs.money.total)}€ || Achieved:{' '}\n                    {formatMoney(project.needs.money.backed)}€\n                  </small>\n                  <ProgressBar project={project} />\n                  <Link\n                    className='text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded'\n                    to={`/project/${project._id}/contribute`}\n                  >\n                    Support this cause\n                  </Link>\n                </div>\n              </div>\n            )}\n            <div className=' pt-6 pr-6 pl-6 mr-10 ml-10 flex flex-row justify-between'>\n              {haveResources && (\n                /* Something will show */\n                <div>\n                  <p>Resources needed:</p>\n                  <table className='table-auto mt-6 mb-10'>\n                    <thead>\n                      <tr>\n                        <th className='px-4 py-2'>Resource</th>\n                        <th className='px-4 py-2'>Quantity</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {/* map */}\n                      {project.needs.resources.map((resource) => (\n                        <tr key={resource._id}>\n                          <td className='border-2 px-4 py-2 text-center'>{resource.name}</td>\n                          <td className='border-2 px-4 py-2 text-center'>\n                            {resource.quantity} und.\n                          </td>\n                        </tr>\n                      ))}\n                      {/* FIM DE MAP */}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n              {haveVolunteers && (\n                <div>\n                  <p>Volunteers:</p>\n                  <table className='table-auto mt-6 mb-10'>\n                    <thead>\n                      <tr>\n                        <th className='px-4 py-2'>Type</th>\n                        <th className='px-4 py-2'>Quantity</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {/* map */}\n                      {project.needs.volunteer.map((volunteer) => (\n                        <tr key={volunteer._id}>\n                          <td className='border-2 px-4 py-2 text-center'>{volunteer.name}</td>\n                          <td className='border-2 px-4 py-2 text-center'>{volunteer.quantity}</td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n            <div className='mb-8'>\n              <p className='mb-4 mt-6'>If you want to contribute with any resources, needs: </p>\n              <Link\n                className='text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded'\n                to={`/user/${project.creator._id}`}\n              >\n                Contact me\n              </Link>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\nexport default SingleProjectView;\n"]},"metadata":{},"sourceType":"module"}